# Introducción {#sec-Chapter1}

En este documento se presenta el desarollo del paquete metaSurvey disponible en R. El objetivo principal de metaSurvey es permitir que el usuario pueda construir indicadores de manera reproducible y transparente, teniendo el usuario un control total sobre el proceso de transformación de los microdatos a indicadores.

A lo largo del documento se mencionan diferentes conceptos para el desarrollo del paquete, como la meta-programación, conceptos de Inferencia en Poblaciones finitas, metodología sobre el desarrollo de paquetes en R. Además, se presentan ejemplos de cómo utilizar el paquete metaSurvey para construir indicadores de mercado de trabajo a partir de los microdatos de la Encuesta Continua de Hogares del Instituto Nacional de Estadística de Uruguay.

La motivación principal del desarrollo del paquete fue la necesidad de contar con un paquete que permita al usuario tener un control total sobre el proceso de transformación de los microdatos a indicadores. En general, los paquetes que existen en R para el análisis de encuestas por muestreo son muy sensibles a la estructura y las variables que componen a la encuesta. En general, un cambio en la estructura de la encuesta implica una nueva versión del paquete utilizado para obtener los indicadores, siendo poco flexible a cambios en la estructura de la encuesta y generalmente el usuario tiene una función de alto nivel que no permite modificar el código para adaptarlo a sus necesidades o saber cada paso que se realiza para obtener el indicador sin tener que leer el código fuente o la documentación adjunta.

El problema de sensibilidad a la estructura de la encuesta puede verse en el paquete ech [@ech] donde en el existen funciones para crear variables de mercado de trabajo, pero estas funciones dependen de una va


Dentro del documento se presentan ejemplos de cómo utilizar el paquete metaSurvey para construir indicadores de mercado de trabajo a partir de los microdatos de la Encuesta Continua de Hogares del Instituto Nacional de Estadística de Uruguay. 

Además, se presentan conceptos claves de la meta-programación y se muestra cómo se utiliza la meta-programación en el paquete metaSurvey. Luego se presentan conceptos básicos de muestreo sobre los estimadores bajo el contexto de Inferencia en Poblaciones finitas, para luego mostrar cómo es crucial tener en cuenta el diseño de la encuesta para la construcción de indicadores y evaluar su incertidumbre, otro de los puntos fuertes del paquete metaSurvey. Por último, se muestra una aplicación del uso cotidiano del paquete, donde pueden verse ejemplos de cómo construir nuestras propias recetas y/o también consultar recetas ya construidas por otros usuarios.

## Motivación

La fuente principal de los indicadores sociales y económicos a nivel poblacional proviene, en general, de encuestas por muestreo. Construir un indicador de interés a partir de los microdatos de una encuesta implica un proceso de creación de variables que intentan capturar el fenómeno de interés. En general, el proceso de construcción de indicadores es complejo e involucra la selección de variables, la creación de variables sintéticas, la imputación de valores faltantes, la estandarización de variables, la selección de la unidad de análisis, entre otros.

Este proceso es crucial para la correcta interpretación de los resultados y para la comparabilidad de los indicadores a través del tiempo y entre diferentes poblaciones. En este sentido, la construcción de indicadores requiere un conocimiento profundo de la encuesta y de las variables que la componen, así como de las características de la población de interés.

En general, este proceso se realiza en algún software estadístico, como SPSS, SAS o STATA. Sin embargo, en los últimos años, el uso de R para el análisis de datos ha crecido significativamente. R es un lenguaje de programación y un entorno de desarrollo para la realización de análisis estadísticos. R es un software libre, lo que significa que es gratuito y actualmente posee una comunidad de usuarios muy activa que desarrolla paquetes y funciones para realizar análisis y modelos estadísticos.

En R, existen diferentes paquetes para procesar encuestas por muestreo. El paquete más conocido es survey, que permite realizar análisis de encuestas por muestreo de manera sencilla y eficiente. El paquete survey permite realizar análisis descriptivos, estimar diferentes indicadores tomando en cuenta el diseño de la encuesta y los estadísticos más usuales. Además, el paquete survey permite realizar análisis de encuestas complejas, como encuestas con estratificación, conglomerados y diseño de muestreo complejo.

Dentro de la comunidad de R también existen otros paquetes que se centran en alguna encuesta en particular, como el paquete ech, que permite obtener datos de la Encuesta Continua de Hogares del Instituto Nacional de Estadística de Uruguay, o el paquete eph, que permite obtener datos de la Encuesta Permanente de Hogares del Instituto Nacional de Estadística y Censos de Argentina, entre otros.

Estos paquetes permiten democratizar el acceso a los microdatos y obtener los indicadores de interés utilizando R con funciones comprensibles para cualquier usuario con experiencia en análisis de datos. Esto es importante ya que permite que los usuarios puedan replicar los resultados y verificar la calidad de los indicadores. Además, fomenta la transparencia y la reproducibilidad de los resultados, ya que los usuarios pueden compartir el código y los datos utilizados para obtener los indicadores.

Sin embargo, una de las limitaciones de estos paquetes es que son muy sensibles a la estructura y las variables que componen a la encuesta. En general, un cambio en la estructura de la encuesta implica un cambio en el código utilizado para obtener los indicadores, siendo poco flexible a cambios en la estructura de la encuesta y generalmente el usuario tiene una función de alto nivel que no permite modificar el código para adaptarlo a sus necesidades o saber cada paso que se realiza para obtener el indicador sin tener que leer el código fuente o la documentación adjunta.

En este sentido, metaSurvey es un paquete que busca solucionar estas limitaciones ya que todo el proceso de transformación de los microdatos a indicadores se realiza a través de una serie de funciones que permiten al usuario tener un control total y transparente sobre el proceso de transformación de los microdatos a indicadores. Además, metaSurvey permite que el usuario pueda realizar el proceso de transformación de los microdatos a indicadores de manera reproducible y transparente, ya que el usuario puede compartir el código y los datos utilizados para obtener los indicadores, mediante lo que denominamos steps y recipes, conformando así una especie de "recetario de cocina" para la construcción de indicadores.

El enfoque que permite la flexibilidad a la hora de construir los indicadores es la meta-programación. La meta-programación es un paradigma de programación que permite que un programa pueda modificar su estructura interna. En R, la meta-programación se realiza a través de las funciones eval y parse que permiten evaluar y parsear código de manera dinámica. En este sentido, metaSurvey utiliza la meta-programación para permitir que el usuario pueda modificar el código que se utiliza para transformar los microdatos a indicadores teniendo funciones similares a las que se utilizan en el paquete recipes de la librería tidymodels.

En lo que sigue de esta sección, se presenta el paquete metaSurvey y se muestran ejemplos para la construcción y estimación de variables de mercado de trabajo de Uruguay con la ECH 2022 utilizando el paquete metaSurvey y el paquete ech.

En capítulos posteriores se presentan conceptos claves de la meta-programación y se muestra cómo se utiliza la meta-programación en el paquete metaSurvey. Luego se presentan conceptos básicos de muestreo sobre los estimadores bajo el contexto de Inferencia en Poblaciones finitas, para luego mostrar cómo es crucial tener en cuenta el diseño de la encuesta para la construcción de indicadores y evaluar su incertidumbre, otro de los puntos fuertes del paquete metaSurvey. Por último, se muestra una aplicación del uso cotidiano del paquete, donde pueden verse ejemplos de cómo construir nuestras propias recetas y/o también consultar recetas ya construidas por otros usuarios

## Mercado de Trabajo {ech} vs {metaSurvey}
